{% if site.style == 'dark' %}
  {% assign icon_color = "#ffffff" %}
{% else %}
  {% assign icon_color = "#24292e" %}
{% endif %}

{% assign content = page.content %}

{% assign posts_total = site.posts | size %}

{% assign user = site.github.owner %}

{% if page.path contains '_posts' %}
  {% assign page_title = page.title %}
  {% assign meta_description = page.content | strip_html | strip_newlines | xml_escape | truncate: 300 %}
{% else %}
  {% assign page_title = user.name %}
  {% assign meta_description = user.bio | strip_html | strip_newlines | xml_escape | truncate: 300 %}
{% endif %}

<!doctype html>
<html class="min-height-full {% if site.style == 'dark' %}theme-dark{% endif %}">
  <head>
    <meta charset="utf-8">
    <title>Ash在招聘-PPIO/PPLabs</title>
    <meta name="description" content="{{ meta_description }}" />
    <meta property="og:title" content="{{ user.name }}" />
    <meta property="og:image" content="{{ user.avatar_url }}" />
    <meta property="og:description" content="{{ meta_description }}" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Baidu Analytics -->
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?406e2065031ae88b6bf40e6df80d8694";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-138967165-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-138967165-1');
    </script>
    <link href="{{ "/assets/styles.css" | relative_url }}" rel="stylesheet" type="text/css">
    
    <!-- 主题切换按钮样式 -->
    <style>
      .theme-switch-wrapper {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.3s;
        opacity: 0.7;
      }
      
      .theme-switch-wrapper:hover {
        opacity: 1;
      }
      
      .theme-switch {
        display: inline-block;
        height: 34px;
        position: relative;
        width: 60px;
      }
      
      .theme-switch input {
        display: none;
      }
      
      .slider {
        background-color: #ccc;
        bottom: 0;
        cursor: pointer;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
        transition: .4s;
        border-radius: 34px;
      }
      
      .slider:before {
        background-color: white;
        bottom: 4px;
        content: "";
        height: 26px;
        left: 4px;
        position: absolute;
        transition: .4s;
        width: 26px;
        border-radius: 50%;
      }
      
      input:checked + .slider {
        background-color: #2196F3;
      }
      
      input:checked + .slider:before {
        transform: translateX(26px);
      }
      
      .theme-icon {
        margin-right: 10px;
        font-size: 20px;
      }
      
      @media (max-width: 768px) {
        .theme-switch-wrapper {
          top: 10px;
          right: 10px;
        }
        
        .theme-switch {
          height: 28px;
          width: 50px;
        }
        
        .slider:before {
          height: 20px;
          width: 20px;
        }
        
        input:checked + .slider:before {
          transform: translateX(22px);
        }
      }
      
      @media (max-width: 500px) {
        .theme-switch-wrapper {
          top: 50px; /* 避免与导航栏重叠 */
        }
      }
      
      @media (max-width: 400px) {
        .theme-switch-wrapper {
          top: auto;
          bottom: 20px;
          right: 20px;
        }
      }
      
      /* 添加平滑过渡效果 */
      body, a, p, h1, h2, h3, h4, h5, h6, .bg-white, .bg-gray-dark {
        transition: background-color 0.3s, color 0.3s;
      }
      
      /* 支持全局主题类 */
      html.theme-dark {
        background-color: #2f363d !important;
        color: #ffffff !important;
      }
      
      body.theme-dark {
        background-color: #2f363d !important;
        color: #ffffff !important;
      }
      
      /* 确保文本在深色主题下可见 */
      .theme-dark p, 
      .theme-dark h1, 
      .theme-dark h2, 
      .theme-dark h3, 
      .theme-dark h4, 
      .theme-dark h5, 
      .theme-dark h6, 
      .theme-dark span, 
      .theme-dark li,
      .theme-dark td,
      .theme-dark th,
      .theme-dark blockquote,
      .theme-dark label {
        color: #ffffff !important;
      }
      
      /* 特殊处理链接颜色 */
      .theme-dark a:not(.btn) {
        color: #58a6ff !important;
      }
      
      /* 确保主题切换时按钮视觉效果更一致 */
      .dark-button {
        background-color: #4a4a4a !important;
        color: #ffffff !important;
        border-color: #666 !important;
      }
      
      .theme-dark .slider {
        background-color: #555;
      }
      
      /* 确保背景元素在深色主题下正确显示 */
      .theme-dark .bg-white, 
      .theme-dark .border, 
      .theme-dark .markdown-body, 
      .theme-dark .highlight, 
      .theme-dark pre, 
      .theme-dark code, 
      .theme-dark section, 
      .theme-dark header, 
      .theme-dark footer, 
      .theme-dark nav, 
      .theme-dark .container, 
      .theme-dark .content, 
      .theme-dark main, 
      .theme-dark aside {
        background-color: #2f363d !important;
        border-color: #444 !important;
      }
      
      /* 代码块特殊处理 */
      .theme-dark pre, 
      .theme-dark code {
        background-color: #1f2428 !important;
        color: #e6e6e6 !important;
      }
      
      /* 表格特殊处理 */
      .theme-dark table,
      .theme-dark th,
      .theme-dark td {
        border-color: #444 !important;
      }
      
      /* 引用块特殊处理 */
      .theme-dark blockquote {
        border-left-color: #444 !important;
      }
      
      /* 图片处理 */
      .theme-dark img {
        filter: brightness(0.9);
      }
    </style>
    
    <!-- 防止主题闪烁 -->
    <script>
      (function() {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
          document.documentElement.classList.add('theme-dark');
        } else if (savedTheme === 'light') {
          document.documentElement.classList.remove('theme-dark');
        }
      })();
    </script>
  </head>
  <body class="{% if site.style == 'dark' %}theme-dark bg-gray-dark{% else %}bg-white{% endif %}" {% if site.style == 'dark' %}style="background-color: #2f363d !important; color: #ffffff !important;"{% endif %}>
  
  <!-- 主题切换按钮 -->
  <div class="theme-switch-wrapper">
    <span class="theme-icon">☀/☾</span>
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" {% if site.style == 'dark' %}checked{% endif %}>
      <div class="slider"></div>
    </label>
  </div>
